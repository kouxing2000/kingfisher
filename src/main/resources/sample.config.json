{
  "proxyHost": "0.0.0.0",
  "proxyPort": 8081,
  "variables": {
    "protocol": "https",
    "branchRoot": "c:/dev/depot/main",
    "env": "slce002",
    "domain": "www.${env}.com"
  },
  "rules": [
    {
      "disabled": false,
      "when" : {
        "url": "https://m.${env}.com/shape/accountmanagement/orders/v1/buyer/*",
        "header.acceptLanguage" : "en-de"
      },
      "then": [
        {
          "delay" : 200
        },
        {
          "answer": {
            "version": "1.1",
            "statusCode": 404,
            "headers": {
              "Keep-Alive": "timeout=5, max=100",
              "Connection": "Keep-Alive",
              "activityID": "activityID1"
            },
            "body": "<html>ERROR</html>"
          }
        }
      ]
    },
    {
      "url": "https://www.${env}.com/shape/user/customers/v1/*/paymentInstrumentsV2*",
      "disabled": false,
      "filters": [
        {
          "type": "mapping",
          "config": {
            "to": "e:\\payment.json"
          }
        }
      ]
    },
    {
      "url": "https://m.${env}.com/shape/accountmanagement/*",
      "regexUrl": "",
      "disabled": false,
      "filters": [
        {
          "type": "handler",
          "config": {
            "className": "com.kingfisher.proxy.custom.PseudolocalizationHandler",
            "parameters": {
              /* regex for gson value */
              "targetTextPatternInRegx": "(\\\"[^\\\"]*?\\s+?[^\\\"]+?\\\"|\\\"[A-Z][a-z]+?\\\")"
            }
          }
        }
      ]
    },
    {
      "url": "http://www.${env}.co.uk/event/*",
      "regexUrl": "",
      "disabled": false,
      "filters": [
        {
          "type": "handler",
          "config": {
            "className": "com.kingfisher.proxy.custom.ReplaceHandler",
            "parameters": {
              "'gs.features.2.ablapp.SellerEligibilityEnabled','featureValue':'FALSE'": "'gs.features.2.common.pdoLayout','featureValue':'GB'"
            }
          }
        }
      ]
    },
    {
      "url": "http://${env}mci001.${env}.com:8080/solr/*",
      "regexUrl": "",
      "disabled": false,
      "filters": [
        {
          "type": "handler",
          "config": {
            "className": "com.kingfisher.proxy.custom.cacher.MemoryCacher",
            "parameters": {
              "max": 100,
              "timeToLiveSecond": "60"
            }
          }
        }
      ]
    }
  ],
  "chainedProxies": [
    {
      "host": "slc-entbc-001",
      "port": 80,
      "disabled": true,
      "bypassHosts": [
        "*srwd*",
        "*slcq*"
      ]
    }
  ]
}
